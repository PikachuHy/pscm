enable_testing()
function(add_pscm_test name src)
    add_executable(${name} ${src})
    target_link_libraries(${name} PRIVATE doctest::doctest pscm)
    add_test(NAME ${name} COMMAND ${name})
endfunction()
add_pscm_test(sicp_ch1_tests sicp/ch1_tests.cpp)
add_pscm_test(number_test number_tests.cpp)
add_pscm_test(parser_test parser_tests.cpp)
add_pscm_test(cell_test cell_tests.cpp)
add_pscm_test(callcc_test callcc_tests.cpp)
add_pscm_test(for_each_test for_each_tests.cpp)
add_pscm_test(map_test map_tests.cpp)
add_pscm_test(cond_test cond_tests.cpp)
add_pscm_test(do_test do_tests.cpp)
add_pscm_test(list_test list_tests.cpp)
add_pscm_test(apply_test apply_tests.cpp)
add_pscm_test(port_test port_tests.cpp)
add_pscm_test(r4rs_test r4rs/r4rs_tests.cpp)
