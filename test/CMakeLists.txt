enable_testing()
function(add_pscm_test name src)
    add_executable(${name} ${src})
    target_link_libraries(${name} PRIVATE doctest::doctest pscm)
    add_test(NAME ${name} COMMAND ${name})
endfunction()
add_pscm_test(sicp_ch1_tests sicp/ch1_tests.cpp)
add_pscm_test(number_test number_tests.cpp)
add_pscm_test(cell_test cell_tests.cpp)
add_pscm_test(callcc_test callcc_tests.cpp)
add_pscm_test(r4rs_test r4rs/r4rs_tests.cpp)
